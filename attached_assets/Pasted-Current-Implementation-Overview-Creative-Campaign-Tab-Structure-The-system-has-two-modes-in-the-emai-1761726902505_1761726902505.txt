Current Implementation Overview
Creative Campaign Tab Structure
The system has two modes in the email drawer:
1. "Compose" - For individual emails to specific contacts
2. "Create Campaign" - For bulk email campaigns with recipient selection
The EmailComposer component handles both modes and includes:
* AI-powered template generation with 7 tone options and 6 offer strategies
* Merge field support for personalization ({{first_name}}, {{company_name}}, etc.)
* Quick templates for saving and reusing email content
* Recipient selection modal for choosing target audiences
Campaign Settings Options
Below the schedule button, there are several configuration options:
* Schedule Send: Date and time picker for delayed sending
* Autopilot: Automatic email distribution settings (days, times, daily limits, delays)
* Track Emails: Toggle for open/click tracking
* Unsubscribe Link: Toggle for compliance links
Critical Issues Found
1. Campaign Settings Not Being Saved ❌
The most significant issue is that the campaign settings (schedule time, autopilot configuration, tracking preferences) are NOT being passed to the backend when creating a campaign.
In the createCampaignMutation (lines 194-285 in email-composer.tsx), the API call only includes:
* Basic campaign info (name, subject, body, prompt)
* Contact list ID
* Tone and offer settings
* Product ID
Missing:
* scheduleDate and scheduleTime from campaign settings
* autopilotSettings configuration
* trackEmails preference
* unsubscribeLink preference
2. Database Schema Incomplete ❌
The campaigns table schema lacks fields for:
* Scheduled send timestamp
* Autopilot configuration (JSON field for settings)
* Email tracking preferences
* Unsubscribe link preference
The current schema only has basic startDate and endDate fields, which aren't sufficient for the granular scheduling features shown in the UI.
3. Settings State Disconnect ⚠️
The CampaignSettings component maintains its own local state and updates the parent through callbacks, but this state (campaignSettings) is never included in the campaign creation API request. The settings are essentially orphaned from the actual campaign creation flow.
4. Context List Saving Works ✅
The recipient selection and list creation is functioning correctly:
* Search results are properly saved as lists
* Contact lists are created from search results
* Recipients are correctly associated with campaigns
What's Working vs What's Not
✅ Working:
* Recipient selection and list management
* Basic campaign creation with email content
* AI template generation with tones and offers
* Merge field personalization
* Search state persistence in localStorage
❌ Not Working:
* Campaign settings not saved to database
* Schedule functionality non-functional (UI exists but backend doesn't process it)
* Autopilot settings not persisted
* No scheduled job processing for timed campaigns
* Tracking and unsubscribe preferences not saved
Impact Assessment
When the "Schedule Campaign" button is clicked:
1. The UI shows success messages
2. A campaign record is created in the database
3. The contact list is properly associated
4. BUT the scheduling information and other settings are lost
5. The campaign will be created as 'draft' or 'immediate' without respecting the scheduled time
This means users might think they've scheduled a campaign for a specific time, but it won't actually send at that time because the scheduling information isn't being saved or processed.
Recommendations
To fix these issues, you'll need to:
1. Update the campaign creation mutation to include campaign settings
2. Extend the database schema with proper fields for scheduling and settings
3. Implement backend scheduling logic to process campaigns at scheduled times
4. Add validation to ensure settings are properly saved and retrieved
5. Test the entire flow end-to-end to verify campaigns execute as scheduled
The core infrastructure is solid, but the connection between the UI settings and backend persistence needs to be completed for the scheduling feature to work as intended.


Current Implementation Overview
Creative Campaign Tab Structure
The system has two modes in the email drawer:
1. "Compose" - For individual emails to specific contacts
2. "Create Campaign" - For bulk email campaigns with recipient selection
The EmailComposer component handles both modes and includes:
* AI-powered template generation with 7 tone options and 6 offer strategies
* Merge field support for personalization ({{first_name}}, {{company_name}}, etc.)
* Quick templates for saving and reusing email content
* Recipient selection modal for choosing target audiences
Campaign Settings Options
Below the schedule button, there are several configuration options:
* Schedule Send: Date and time picker for delayed sending
* Autopilot: Automatic email distribution settings (days, times, daily limits, delays)
* Track Emails: Toggle for open/click tracking
* Unsubscribe Link: Toggle for compliance links
Critical Issues Found
1. Campaign Settings Not Being Saved ❌
The most significant issue is that the campaign settings (schedule time, autopilot configuration, tracking preferences) are NOT being passed to the backend when creating a campaign.
In the createCampaignMutation (lines 194-285 in email-composer.tsx), the API call only includes:
* Basic campaign info (name, subject, body, prompt)
* Contact list ID
* Tone and offer settings
* Product ID
Missing:
* scheduleDate and scheduleTime from campaign settings
* autopilotSettings configuration
* trackEmails preference
* unsubscribeLink preference
2. Database Schema Incomplete ❌
The campaigns table schema lacks fields for:
* Scheduled send timestamp
* Autopilot configuration (JSON field for settings)
* Email tracking preferences
* Unsubscribe link preference
The current schema only has basic startDate and endDate fields, which aren't sufficient for the granular scheduling features shown in the UI.
3. Settings State Disconnect ⚠️
The CampaignSettings component maintains its own local state and updates the parent through callbacks, but this state (campaignSettings) is never included in the campaign creation API request. The settings are essentially orphaned from the actual campaign creation flow.
4. Context List Saving Works ✅
The recipient selection and list creation is functioning correctly:
* Search results are properly saved as lists
* Contact lists are created from search results
* Recipients are correctly associated with campaigns
What's Working vs What's Not
✅ Working:
* Recipient selection and list management
* Basic campaign creation with email content
* AI template generation with tones and offers
* Merge field personalization
* Search state persistence in localStorage
❌ Not Working:
* Campaign settings not saved to database
* Schedule functionality non-functional (UI exists but backend doesn't process it)
* Autopilot settings not persisted
* No scheduled job processing for timed campaigns
* Tracking and unsubscribe preferences not saved
Impact Assessment
When the "Schedule Campaign" button is clicked:
1. The UI shows success messages
2. A campaign record is created in the database
3. The contact list is properly associated
4. BUT the scheduling information and other settings are lost
5. The campaign will be created as 'draft' or 'immediate' without respecting the scheduled time
This means users might think they've scheduled a campaign for a specific time, but it won't actually send at that time because the scheduling information isn't being saved or processed.
Recommendations
To fix these issues, you'll need to:
1. Update the campaign creation mutation to include campaign settings
2. Extend the database schema with proper fields for scheduling and settings
3. Implement backend scheduling logic to process campaigns at scheduled times
4. Add validation to ensure settings are properly saved and retrieved
5. Test the entire flow end-to-end to verify campaigns execute as scheduled
The core infrastructure is solid, but the connection between the UI settings and backend persistence needs to be completed for the scheduling feature to work as intended.


