Detailed Implementation Plan: Remove Dead Company Analysis Code
Overview
Remove 213 lines of dead code from the search/analysis folder that was part of the old manual post-processing system. These functions are imported but never executed, and their results are not used anywhere in the application.

Step 1: Clean Up Imports in company-search.ts
File: server/search/core/company-search.ts

Current code (lines 1-14):

import type { Company, Contact } from "@shared/schema";
import { queryPerplexity } from "./perplexity-client";
import type { PerplexityMessage } from "./perplexity-types";
import { analyzeWithPerplexity } from "./perplexity-utils";
import { 
  analyzeCompanySize, 
  analyzeDifferentiators,
  calculateCompanyScore 
} from "../analysis/company-analysis";
import { validateName } from "../analysis/contact-validation";
import { extractContacts } from "../analysis/email-extraction-format";
import { validateNames } from "../analysis/contact-ai-name-scorer";
import { findKeyDecisionMakers } from "../contacts/finder";
import { cleanPerplexityResponse } from "../../lib/utils";
Replace with:

import type { Company, Contact } from "@shared/schema";
import { queryPerplexity } from "./perplexity-client";
import type { PerplexityMessage } from "./perplexity-types";
import { analyzeWithPerplexity } from "./perplexity-utils";
import { validateName } from "../analysis/contact-validation";
import { extractContacts } from "../analysis/email-extraction-format";
import { validateNames } from "../analysis/contact-ai-name-scorer";
import { findKeyDecisionMakers } from "../contacts/finder";
import { cleanPerplexityResponse } from "../../lib/utils";
What changed: Removed lines 5-9 which imported the three unused functions from company-analysis.ts

Step 2: Clean Up Export in perplexity-utils.ts
File: server/search/core/perplexity-utils.ts

Current code (lines 142-145):

// Re-export essential analysis functions
export { extractContacts } from "../analysis/email-extraction-format";
export { parseCompanyData } from "../analysis/company-parser";
export type { PerplexityMessage };
Replace with:

// Re-export essential analysis functions
export { extractContacts } from "../analysis/email-extraction-format";
export type { PerplexityMessage };
What changed: Removed line 144 which exported the unused parseCompanyData function

Step 3: Delete Unused Files
Files to delete:

server/search/analysis/company-analysis.ts (109 lines)
server/search/analysis/company-parser.ts (104 lines)
Reason: These files contain only dead code:

company-analysis.ts contains:

stripCompanySummary() - never called
cleanCompanyName() - never called
isFranchise() - never called
isLocalHeadquarter() - never called
analyzeCompanySize() - imported but never called
analyzeDifferentiators() - imported but never called
calculateCompanyScore() - imported but never called
company-parser.ts contains:

parseCompanyData() - exported but never called anywhere, has 8 TypeScript errors
Step 4: Verify Application Still Works
After making these changes:

Check that the workflow restarts without errors
Verify that company search still works
Confirm that TypeScript errors are reduced (should remove 12 errors from the deleted files)
Impact Summary
Lines removed: 213 lines of dead code
TypeScript errors fixed: 12 errors (4 in company-analysis.ts, 8 in company-parser.ts)
Files deleted: 2 files
Files modified: 2 files (minor import cleanup)
Functional impact: None - this code was never executed
Database impact: None - fields remain in schema for potential future use
Frontend impact: None - UI already handles null values gracefully
Verification Notes
The functions being removed were only imported in one place (company-search.ts) but never invoked. The parseCompanyData function was exported from perplexity-utils.ts but never consumed anywhere in the codebase. The frontend displays for size, totalScore, and differentiation already handle null values by showing "N/A" or hiding the fields, so no frontend changes are needed.

